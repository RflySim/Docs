## <center> 乐迪AT9S Pro </center>

### 1.产品介绍

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AT9S Pro是一款12通道发射机，支持2.4G DSSS和FHSS双混合扩频，16通道伪随机跳频。   
发射机硬件说明如下图所示。  

* ***注： 乐迪AT9S pro遥控器主要用于室内课程实验使用，其价格也较为便宜。***

<center>
<img src="/B/Image/AT9S_Pro_1.png" width="45%">
<img src="/B/Image/AT9S_Pro_2.png" width="45%">
</center>

### 2.遥控器配置

<center>
<img src="/B/Image/AT9S_Pro_3.png" width="30%">
<img src="/B/Image/AT9S_Pro_4.png" width="30%">
<img src="/B/Image/AT9S_Pro_5.png" width="30%">
</center>

###### 1）向上拨“开关”，打开遥控器  
###### 2）设置语言为中文以及关闭声音  

* · 长按遥控器按键面板的“模式”按钮，  <br> 
* · 弹出下左图的模型设置页面。  <br> 
* · 滚动遥控器上的“方向滚轮”，  <br> 
* · 将光标移动到上图的“PARAMETER”上，  <br> 
* · 按下遥控器面板右侧的“确定”按钮，即可进入遥控器参数设置页面， <br>  
* · 滚动遥控器面板的“方向滚轮”选中“English”条目。  <br> 

<center>
<img src="/B/Image/AT9S_Pro_6.png" width="30%">
<img src="/B/Image/AT9S_Pro_7.png" width="30%">
</center>

* · 点击遥控器“确定”按钮， <br> 
* · 再滚动“方向滚轮”， <br> 
* · 将语言改变为下图所示的“简体” <br> 
* · 然后点击遥控器“确定”按钮，即可将语言设置为中文  <br> 
* · 通过同样的方法，如图所示，将声音选项从“打开”调整为“关闭”。 <br> 

###### 3）多旋翼模式设置  

<center>
<img src="/B/Image/AT9S_Pro_8.png" width="30%">
<img src="/B/Image/AT9S_Pro_9.png" width="30%">
<img src="/B/Image/AT9S_Pro_10.png" width="30%">
</center>

* · 长按遥控器面板的“模式”按钮，进入上图所示的“基础菜单”设置界面，点击“机型选择”，进入上图所示的机型选择页面。 <br> 
* · 在“机型”条目，将“直升机模型”更改为“多旋翼模型”，然后长按遥控器面板的“确认”按钮超过一秒，如上图所示，将遥控模式设置为多旋翼 <br> 

###### 4）油门通道反向设置   

* · 乐迪遥控器的多旋翼模式的油门通道与Pixhawk的定义是相反的，因此需要进行调整。<br> 
* · 长按遥控器面板的“模式”按钮，<br> 
* · 进入上图所示的“基础菜单”设置界面，并选中“舵机相位”条目。<br> 
* · 在“舵机相位”条目设置页面，将油门从“正相”修改为“反相”。<br> 

<center>
<img src="/B/Image/AT9S_Pro_11.png" width="30%">
<img src="/B/Image/AT9S_Pro_12.png" width="30%">
</center>

###### 5）CH5模式切换通道设置  

<center>
<img src="/B/Image/AT9S_Pro_13.png" width="60%">
</center>

* · 由于实验需求，需要将遥控器的第五通道（CH5）映射为左上角的三段开关，用于控制器的模式切换使用。<br> 
* · 长按遥控器面板的“模式”按钮，进入上图所示的“基础菜单”设置界面，并进入“辅助通道”条目。<br> 
* · 按上图所示，进入“五通”设置页面，将CH5映射为遥控器的三段开关“SwE”（左上角前沿面开关“E”）。同理设置CH6位“SwG”。<br> 


###### 6）通道确认  

* · 在主页面，按下遥控器的“返回”按钮，可以出现如下“舵量显示”界面，此时拨动各个摇杆可以看到每个通道PWM值得变化情况。<br> 

> 注意：下图界面黄色区域上侧100对应PWM值1100 (QGC的Channel Monitor中对应通道滑块位于左侧)，黄色区域下侧100对应PWM值1900 (QGC的Channel Monitor对应通道滑块位于右侧) 。<br>  &nbsp;&nbsp;&nbsp;&nbsp;因为各种误差的存在，实际自驾仪接收到的PWM信号并不完全等于1100-1900的范围，例如乐迪遥控器的范围通常为1065 -1933（可以如右下图在QGC中设置 – Parameters – Radio Calibration页面查看）。<br>&nbsp;&nbsp;&nbsp;&nbsp; 因此，遥控器校准对于自驾仪正常识别飞控手从遥控器发送的指令至关重要。遥控器校准可以在QGC地面站的Radio页面中实现。<br> 
<center>
<img src="/B/Image/AT9S_Pro_14.png" width="60%">
</center>

* · 依次拨动各个摇杆，确定各个通道按如下规则正确定义：

***CH1：对应滚转控制，从左到右对应PWM值为1100到1900(QGC的Channel Monitor的1号滑块从左移动到右)。  ***<br> 
***CH2：对应俯仰控制，从上到下对应PWM值为1100到1900。(QGC的Channel Monitor的2号滑块从左移动到右)。  *** <br> 
***CH3：对应油门控制，从上到下对应PWM值为1900到1100（注意，这里和CH2是相反的，QGC3号滑块从右到左）。  ***<br> 
***CH4：对应偏航控制，从左到右对应PWM值为1100到1900。  ***<br> 
***CH5/6：对应模式控制，SE摇杆（最左上侧），这是一个三段开关，顶部（最远离使用者的档位）、中部和底部（最靠近使用者的档位）档位对应PWM值为1100、1500和1900。  ***<br> 

<center>
<img src="/B/Image/AT9S_Pro_15.png" width="40%">
</center>

###### 7）硬件连线  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本仿真实验首选的遥控器为乐迪AT9Spro遥控器和配套的R9DS接收机<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;必要的附件包括：电池（LiPo电池，3S，11.1V）和配套充电器，用于给遥控器供电；JR线（也可用杜邦线代替），用于连接接收机与Pixhawk自驾仪；MicroUSB数据线，用于连接Pixhawk自驾仪和计算机。

<center>
<img src="/B/Image/AT9S_Pro_16.png" width="45%">
<img src="/B/Image/AT9S_Pro_17.png" width="30%">
</center>

* · 按上图连线，接收机右下侧排针通过JR线连接到飞控最左侧排针（注意线序，接收机LED灯暗红色说明线接反了），将USB与电脑USB口连接，给接收机供电。<br> 
* · 遥控器重新配对（默认情况已经连接完毕，只有连接出现问题时才需要重新配对）。打开遥控器电源，用笔尖长按接收机右侧面的按键超过一秒，此时LED灯闪烁，指示寻找距离最近的遥控器（此时应该将其他遥控关闭），并开始对码。LED灯闪烁7~8次后变为常亮，说明对码完毕，遥控器与接收机建立连接。<br> 
* · S.BUS信号模式选择。S.BUS模式使得可以通过一根JR线完成所有通道PWM信号的传输，从而建立接收机与飞控的连接。如果LED灯为蓝白色，说明此时属于S.BUS模式，不需要进行设置。如果LED灯为红色，则需要短按接收机右侧面按键两次（1秒内），LED灯变为蓝白色说明S.BUS模式切换完毕。<br> 

<center>
<img src="/B/Image/AT9S_Pro_18.png" width="60%">
</center>

* · 检查遥控器与接收机正确连接方法：<br> 
> 1、正确连接自驾仪与接收机，用USB数据线连接自驾仪与电脑，打开遥控器，打开QGroundControl地面站软件。<br> 
> 2、等待地面站成功连接上Pixhawk后，按上图所示，点击“齿轮”按钮进入设置页面，再点击“Radio”（遥控器）按钮，进入上图的遥控器配置页面。<br> 
> 3、如果可以观察到上图最右侧的“Channel Monitor”下面显示各个通道和滑块，且推动遥控器上的摇杆滑块会随之移动，说明接收机已经配置并连接正确。否则，需要重新确认之前步骤是否正确。<br> 

* · 遥控器电池安装方式为：打开遥控器后侧下方电池槽（向下推即可），将电池供电头（红色接口，有红黑两条电线对应正极和负极）插在遥控器的电池槽左侧二口排插上，保证正极（红色电线）朝上。<br> 
> 注：不要使用 USB端口作为充电端口，否则会损坏发射机，端口用于升级固件和将数据复制到计算机。它不能在计算机上用作控制器。<br> 

<center>
<img src="/B/Image/AT9S_Pro_19.png" width="60%">
</center>

* · 如下图左侧为电池和充电器的实物图，将充电器插在插座上，同时电池的四口充电头（平衡头）插在充电器右下侧的插口上，红色线在最左侧，即可开始充电。处于充电状态时，充电器的指示灯为红色，当电池电量充满时，指示灯变为绿色，此时充电完成，拔下电池放入电池后壳。
<br> 

<center>
<img src="/B/Image/AT9S_Pro_20.png" width="60%">
</center>

###### 8）基本操控设置 <br> 
* · 设置舵机相位：对于多旋翼模型，此处只需将油门设置为“反相”；<br> 
* · 设置失控保护：对多旋翼模型，只需要设置油门的失控保护。<br> 
> 方法：<br> Ⅰ.将油门杆向下推至最小，然后调整其旁边的微调按钮，一直向下打，边打边听提示音，直到达到其调整的极限为止。<br> 
> Ⅱ.选至油门处，长按“Push”，选框中为“反相”，将油门杆推至最低，选择其旁边的微调按钮，一直向下打，边打边听提示音，直到达到其调整的极限为止（声音为短促的声音）。

* · 辅助通道设置：

* &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;选择“六通”←--姿态选择 通道：CH6 三段：SwC二段：SwD。<br> 

<table align="center">
   <tr align="center">
      <td  colspan = "2">rate</td>
      <td>posi</td>
      <td>swt</td>
   </tr>
   <tr align="center">
      <td>自稳：</td>
      <td>0%</td>
      <td>(UP-UP)</td>
      <td>（打开）</td>
   </tr>
   <tr align="center">
      <td>悬停：</td>
      <td>20%</td>
      <td>(CT-UP)</td>
      <td>（关闭）</td>
   </tr>
   <tr align="center">
      <td>定高：</td>
      <td>40%</td>
      <td>(DN-UP)</td>
      <td>（关闭）</td>
   </tr>
   <tr align="center">
      <td>引导：</td>
      <td>55%</td>
      <td>(UP-DN)</td>
      <td>（关闭）</td>
   </tr>
   <tr align="center">
      <td>降落：</td>
      <td>75%</td>
      <td>(CT-DN)</td>
      <td>（关闭）</td>
   </tr>
   <tr align="center">
      <td>自稳：</td>
      <td>95%</td>
      <td>(DN-DN)</td>
      <td>（关闭）</td>
   </tr>
</table>

* &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由SwC、SwD组合选择飞行模式。<br> 
<table align="center">
   <tr align="center">
      <td>SwD</td>
      <td>SwC</td>
      <td>飞行模式</td>
   </tr>
   <tr align="center">
      <td rowspan = "3">↑</td>
      <td>↑</td>
      <td>自稳(stabilized)</td>
   </tr>
   <tr align="center">
      <td>→</td>
      <td>悬停(Loiter)</td>
   </tr>
   <tr align="center">
      <td>↓</td>
      <td>定高(AltHold)</td>
   </tr>
   <tr align="center">
      <td rowspan = "3">↓</td>
      <td>↑</td>
      <td>Offboard(Offboard)</td>
   </tr>
   <tr align="center">
      <td>→</td>
      <td>返航(RTL)</td>
   </tr>
   <tr align="center">
      <td>↓</td>
      <td>降落(Land)</td>
   </tr>
</table>


###### 1.自稳模式（多旋翼）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;自稳模式在当遥控摇杆居中时多旋翼无人机将自稳。要手动使机体移动/飞，您可以移动摇杆使其偏离居中位置。  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在手动控制下，横滚和俯仰摇杆控制机体围绕各个轴的角度（姿态），航向摇杆控制水平面上方的旋转速率，油门控制高度 / 速度。  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一旦释放摇杆，它们将会返回中心死区。 一旦横滚和俯仰摇杆居中，多旋翼无人机将平稳并停止运动。 然后机体将悬停在适当的位置/保持高度 - 前提是平衡得当，油门设置适当（在下方查看），并且没有施加任何外力（例如风）。 飞行器将朝着任何风的方向漂移，您必须控制油门以保持高度。

<center>
<img src="/B/Image/AT9S_Pro_21.png" width="60%">
</center>

###### 2.自稳模式（固定翼）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;自稳模式在摇杆回中时使车辆进入定直平飞，保持姿态水平并抵抗风（但不包括飞机航向和高度）。  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果横滚/俯仰摇杆杆不为零，则无人机根据俯仰输入进行爬升/下降并执行协调的转弯。 横滚和俯仰是角度控制的（不能上下滚动或循环）。  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果油门降至 0％（电机停止），飞机将滑行。 为了执行转弯，必须在整个操纵过程中保持命令，因为如果释放横滚摇杆，则飞机将停止转动并自行调平（对于俯仰和偏航命令也是如此）。  
***注：自稳模式可以很容易通过摇杆回中来保持飞机水平。***

###### 3.定高模式（多旋翼）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定高模式是一个飞行难度相对容易的遥控模式，滚转和俯仰杆控制机体在左右和前后方向上的运动（相对于机体的“前方”），偏航杆控制水平面上的旋转速度，油门控制上升 -下降的速度。  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当杆被释放/回中时，机体将恢复水平并保持当前的高度。 如果在水平面上运动，机体将继持续运动直到任何动量被风阻力消散。如果刮风，飞机会向风的方向漂移。  
***注：对新手来说，定高模式是最安全的无 GPS的手动模式。 就像自稳模式，但是在松开摇杆时也可以锁定机体高度。***

<center>
<img src="/B/Image/AT9S_Pro_22.png" width="60%">
</center>

###### 4.定高模式（固定翼）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定高模式使操纵者更容易控制飞机高度，特别是到达并维持一个固定高度。 该模式不会试图抵抗风扰保持航向。  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;爬升/下沉率通过俯仰/升降舵杆操纵杆来控制。 操纵杆一旦回中，自动驾驶仪就会锁定当前的高度，并在偏航/滚转和任何空速条件下保持高度。  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;油门通道输入控制空速。 滚动和俯仰是角度控制的（因此不可能实现飞机滚转或环绕）。  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当所有遥控输入都居中时（无滚动、俯仰、偏航，油门约 50％），飞机将恢复直线水平飞行（受风影响）并保持其当前高度。  

###### 5.定点模式（多旋翼）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定点模式是一种简单难度的遥控器模式，该模式下横滚和俯仰摇杆控制机体的前后左右方向相对于地面的加速度（类似于车的油门踏板），油门控制上升下降的速度。 当摇杆释放/居中时，机体将主动制动，保持水平，并锁定到3D空间中的位置 — 补偿风和其他力。<br>
***注：定点模式对于新手是最安全的手动模式。 不同于定高模式和自稳模式，机体在摇杆中位时会停止，而不是继续直到风阻使其减速。***

<center>
<img src="/B/Image/AT9S_Pro_23.png" width="60%">
</center>

> 该模式中降落是很容易的：<br>
> &nbsp;&nbsp;1.使用横滚和俯仰杆控制无人机水平位置于降落点上方。<br>
> &nbsp;&nbsp;2.松开横滚和俯仰杆并给予足够的时间使其完全停止。<br>
> &nbsp;&nbsp;3.轻轻下拉油门杆直到机体触碰地面。<br>
> &nbsp;&nbsp;4.将油门杆一直向下拉以促进和加快着陆检测。<br>
> &nbsp;&nbsp;5.机体将降低螺旋桨推力，检测地面并自动落锁（默认）。<br>

***注意：虽然在校准良好的机体上非常罕见，但有时着陆可能会出现问题。如果机体无法停止水平移动：您仍然可以在高度模式下在控制降落。 方法与上述相同，除了您必须使用横滚和俯仰杆手动确保机体保持在降落点上方。降落后检查 GPS 和磁罗盘方向，并校准。如果机体未检测到地面/降落并落锁。机体落地后切换到手动/自稳模式，保持油门杆低位，并使用手势或其他命令手动落锁。 或者，当机体已经在地面上时，您也可以使用断电开关。***

###### 6.定点模式（固定翼）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定点模式是一种易于驾驶的遥控模式，当摇杆释放/居中时，无人机将在当前方向上水平直线飞行 — 补偿风和其他力。  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;油门取决于空速（在 50％油门时，飞机将以预设的巡航速度保持其当前高度）。俯仰用于爬升或下降。翻滚、俯仰和偏航是角度控制的（因此不可能实现飞机滚转或环绕）  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;俯仰，横滚，偏航摇杆居中 – 使得无人机在当前方向上保持与地面水平并抗风。  
***提示：定点模式对于新手是最安全的固定翼手动模式。***

